/* ==========================================================================
   PROJECT: ENICUM CONFIGURATOR
   VERSION: v22.1 (Clean Base)
   FILE:    [D] database.js
   DESC:    Единый источник данных (SSOT).
   CHANGE:  Wiki merge into Hints. Removed garbage.
   ========================================================================== */

   const DB = {
    
    // --- [D-01] МАТРИЦА ГЕОМЕТРИИ ---
    GEO_TYPES: [
        { c: 'x',   l: 'Пучок (x)' },
        { c: 'x2x', l: 'Витые пары (x2x)' },
        { c: 'x3x', l: 'Тройки (x3x)' },
        { c: 'x4x', l: 'Четверки (x4x)' },
        { c: 'vfd', l: 'VFD (Силовой)' }
    ],

    // --- [D-02] ОГРАНИЧЕНИЯ ПО КАТЕГОРИЯМ (LIMITS) ---
    LIMITS: {
        BUS: {
            volt: '-300',
            types: ['x2x'],
            valid_S: ['0.60', '0.78', '0.64', '1.0'],
            defaults: { 11:'нг(А)-LS', 22:'-300', 9:'П', 2:'Пв', 23:'[485]', 24:'Серый' },
            proto: {
                '[485]': { N:[1,2,3,4], S:['0.60','0.78','0.64'] },
                '[PB]':  { N:[1],       S:['0.64'] },
                '[FF]':  { N:[1,2,4],   S:['0.78','1.0','1.5'] },
                '':      { N:[1,2,3,4], S:['0.60','0.78'] }
            }
        },
        SIGNAL: {
            volt: '-500',
            types: ['x2x','x3x','x4x','x'],
            valid_S: ['0.5','0.75','1.0','1.5','2.5'],
            defaults: { 11:'нг(А)-LS', 22:'-500', 9:'В', 2:'В', 24:'Серый' },
            get_valid_N: (s, type) => {
                if(s==='2.5') return [1,2,4,7,10,14];
                return [1,2,4,5,7,10,14,19,24,27,30,37];
            }
        },
        CONTROL: {
            volt: '-660',
            types: ['x','vfd'],
            valid_S: ['0.75','1.0','1.5','2.5','4.0','6.0','10.0','16.0'],
            defaults: { 11:'нг(А)-LS', 22:'-660', 9:'В', 2:'В', 24:'Серый' },
            get_valid_N: (s, type) => {
                if(type === 'vfd') return [1]; 
                return [3,4,5,7,10,14,19,24,27,30,37,52,61];
            },
            vfd_map: {
                '1.5':'3x1.5+3x0.25', '2.5':'3x2.5+3x0.5', '4.0':'3x4.0+3x0.75', 
                '6.0':'3x6.0+3x1.0',  '10.0':'3x10+3x1.5', '16.0':'3x16+3x2.5'
            }
        }
    },

    // --- [D-03] ФИЗИКА МАТЕРИАЛОВ (MAT_PROPS) ---
    MAT_PROPS: {
        // Изоляция
        'В':   { minT: -50, hf: false, fr: false, oil: true,  chem: false, flex_grade: 1, rank: 1, family: 'PVC' },
        'Вк':  { minT: -50, hf: false, fr: true,  oil: true,  chem: false, flex_grade: 0, rank: 1, family: 'PVC' },
        'П':   { minT: -50, hf: true,  fr: false, oil: false, chem: false, flex_grade: 1, rank: 2, family: 'HF' },
        'Пк':  { minT: -50, hf: true,  fr: true,  oil: false, chem: false, flex_grade: 0, rank: 2, family: 'HF' },
        'Пп':  { minT: -60, hf: true,  fr: false, oil: false, chem: false, flex_grade: 1, rank: 3, family: 'PO' },
        'Ппк': { minT: -60, hf: true,  fr: true,  oil: false, chem: false, flex_grade: 0, rank: 3, family: 'PO' },
        'Пс':  { minT: -60, hf: true,  fr: false, oil: false, chem: false, flex_grade: 0, rank: 3, family: 'XLPE' },
        'Пск': { minT: -60, hf: true,  fr: true,  oil: false, chem: false, flex_grade: 0, rank: 3, family: 'XLPE' },
        'Пв':  { minT: -60, hf: false, fr: false, oil: false, chem: false, flex_grade: 0, rank: 2, family: 'FPE' },
        'Пб':  { minT: -50, hf: true,  fr: false, oil: true,  chem: true,  flex_grade: 1, rank: 4, family: 'XL-HF' },
        'Пбк': { minT: -50, hf: true,  fr: true,  oil: true,  chem: true,  flex_grade: 1, rank: 4, family: 'XL-HF' },
        'Тп':  { minT: -60, hf: true,  fr: false, oil: true,  chem: true,  flex_grade: 2, rank: 4, family: 'TPE' },
        'У':   { minT: -60, hf: true,  fr: false, oil: true,  chem: true,  flex_grade: 2, rank: 4, family: 'PUR' },
        'Р':   { minT: -60, hf: true,  fr: true,  oil: false, chem: true,  flex_grade: 2, rank: 5, family: 'SIL' },
        'РПс': { minT: -60, hf: true,  fr: true,  oil: false, chem: true,  flex_grade: 2, rank: 5, family: 'SIL' },
        'РПп': { minT: -60, hf: true,  fr: true,  oil: false, chem: true,  flex_grade: 2, rank: 5, family: 'SIL' },
        'Ф':   { minT: -60, hf: true,  fr: false, oil: true,  chem: true,  flex_grade: 1, rank: 6, family: 'FEP' },

        // Оболочка (Prefix J_)
        'J_В':  { minT: -50, hf: false, fr: true,  oil: true,  uv: false, flex_grade: 1, rank: 1, family: 'PVC' },
        'J_П':  { minT: -50, hf: true,  fr: true,  oil: false, uv: false, flex_grade: 1, rank: 2, family: 'HF' },
        'J_Пэ': { minT: -60, hf: false, fr: false, oil: false, uv: true,  flex_grade: 0, rank: 2, family: 'PE' },
        'J_У':  { minT: -60, hf: true,  fr: false, oil: true,  uv: true,  flex_grade: 2, rank: 4, family: 'PUR' },
        'J_ПУ': { minT: -60, hf: true,  fr: true,  oil: true,  uv: true,  flex_grade: 2, rank: 4, family: 'PUR' },
        'J_Р':  { minT: -60, hf: true,  fr: true,  oil: false, uv: true,  flex_grade: 2, rank: 5, family: 'SIL' },
        'J_Тп': { minT: -60, hf: true,  fr: false, oil: true,  uv: true,  flex_grade: 2, rank: 4, family: 'TPE' },
        'J_Пб': { minT: -60, hf: true,  fr: false, oil: true,  uv: true,  flex_grade: 1, rank: 3, family: 'XL-HF' },
        'J_Ф':  { minT: -60, hf: true,  fr: false, oil: true,  uv: true,  flex_grade: 1, rank: 6, family: 'FEP' }
    },

    // --- [D-04] ГЛАВНЫЙ СПРАВОЧНИК ИНДЕКСОВ (INDICES) ---
    // hint теперь содержит полное описание (бывшее wiki)
    INDICES: [
        { id:1, n:"Взрывозащита", opts:[
            {c:"", l:"Нет (Общепром)", hint:"Общепромышленное исполнение. Применяется на объектах без риска возникновения взрывоопасных сред."}, 
            {c:"Вз", l:"Вз - Взрывозащита", hint:"Вз - для применения кабеля с частичной продольной и радиальной герметичностью на объектах и в помещениях, где возможны наличия смеси воздуха с горючими веществами в форме газа, пара или тумана."}
        ]},
        { id:2, n:"Изоляция ТПЖ", opts:[
            {c:"В", l:"В - ПВХ", hint:"В - из поливинилхлоридного пластиката. Применение: для общего назначения, систем связи, СКУД, КИПиА, АСУ ТП."}, 
            {c:"Вк", l:"Вк - ПВХ+Слюда", hint:"Вк - из огнестойких слюдяных лент и поливинилхлоридного пластиката. Для систем пожарной безопасности."},
            {c:"П", l:"П - Полимер", hint:"П - из полимерной композиции, не содержащей галогенов. Для объектов с массовым скоплением людей."}, 
            {c:"Пк", l:"Пк - Полимер+Слюда", hint:"Пк - из огнестойких слюдяных лент и полимерной композиции, не содержащей галогенов. Для систем пожарной безопасности."},
            {c:"Пв", l:"Пв - Вспененный ПЭ", hint:"Пв – из вспененного полиэтилена. Для интерфейсов RS-485, Profibus, Fieldbus."}, 
            {c:"Пп", l:"Пп - Полиолефин", hint:"Пп - из полиолефиновой композиции. Для интерфейсов RS-485, Profibus, Fieldbus."}, 
            {c:"Ппк", l:"Ппк - Полиолефин+Слюда", hint:"Ппк - из огнестойких слюдяных лент и полиолефиновой композиции. Для систем пожарной безопасности."},
            {c:"Пс", l:"Пс - Сшитый ПЭ", hint:"Пс - из сшитого полиолефина (полиэтилена). Для высокоскоростных сетей передачи данных."}, 
            {c:"Пск", l:"Пск - Сшитый ПЭ+Слюда", hint:"Пск - из огнестойких слюдяных лент и сшитого полиолефина. Максимальная защита цифровых линий при пожаре."},
            {c:"Пб", l:"Пб - Сшитый Полимер", hint:"Пб - из сшитой полимерной композиции, не содержащей галогенов. Для агрессивных сред."},
            {c:"Пбк", l:"Пбк - Сшитый Полимер+Слюда", hint:"Пбк - из огнестойких слюдяных лент и сшитой полимерной композиции. Для систем СПЗ в условиях агрессивных сред."},
            {c:"Тп", l:"Тп - ТЭП", hint:"Тп - из термоэластопласта. Эксплуатация в условиях повышенной температуры до 100°С."}, 
            {c:"Р", l:"Р - Силикон", hint:"Р - из огнестойкой силиконовой (кремнийорганической) керамообразующей резины. Работает при t до +200°С."}, 
            {c:"РПс", l:"РПс - Силикон+Сшитый ПЭ", hint:"РПс - Комбинированная: Силикон + Сшитый полиэтилен. Для защиты интерфейса RS-485 в условиях пожара."}, 
            {c:"РПп", l:"РПп - Силикон+Полиолефин", hint:"РПп - Комбинированная: Силикон + Полиолефин. Для интерфейсов CAN, HART, ModBus в зонах возгорания."}, 
            {c:"Ф", l:"Ф - Фторопласт", hint:"Ф - из сополимеров фторопласта. Экстремальная стойкость: температура до +250°С, химия, масла."}
        ]},
        { id:3, n:"Барьер Пары", opts:[
            {c:"", l:"Нет", hint:"Конструкция без индивидуального огнестойкого барьера."}, 
            {c:"Си", l:"Си - Слюда", hint:"Си - слюдяная огнестойкая лента поверх скрученной пары/тройки."}
        ]},
        { id:4, n:"Экран Пары", opts:[
            {c:"", l:"Нет", hint:"Пары без индивидуального экранирования."}, 
            {c:"ЭИм", l:"ЭИм - Медь-Фольга", hint:"ЭИм - экран из металлополимерной медной ленты."}, 
            {c:"ЭИмо", l:"ЭИмо - Медь+Оплетка", hint:"ЭИмо - медная лента + оплетка из медной проволоки."}, 
            {c:"ЭИкм", l:"ЭИкм - Тройной", hint:"ЭИкм - Тройной экран: Оплетка + Лента + Оплетка."},
            {c:"ЭИа", l:"ЭИа - Алюмофлекс", hint:"ЭИа - экран из алюмолавсановой ленты."}, 
            {c:"ЭИал", l:"ЭИал - Алюм+Сетка", hint:"ЭИал - алюмолавсановая лента + луженая оплетка."}, 
            {c:"ЭИкл", l:"ЭИкл - Тройной Луж.", hint:"ЭИкл - Тройной экран с луженой медью."},
            {c:"ЭИо", l:"ЭИо - Сетка Cu", hint:"ЭИо - оплетка из медной проволоки."},
            {c:"ЭИл", l:"ЭИл - Сетка Sn", hint:"ЭИл - оплетка из луженой проволоки."},
            {c:"ЭИн", l:"ЭИн - Сетка Ni", hint:"ЭИн - оплетка из никелированной проволоки."}
        ]},
        { id:5, n:"Барьер Общий", opts:[
            {c:"", l:"Нет", hint:"Конструкция без общего огнестойкого барьера."}, 
            {c:"С", l:"С - Слюда", hint:"С - слюдяная огнестойкая лента поверх сердечника кабеля."}
        ]},
        { id:6, n:"Экран Общий", opts:[
            {c:"", l:"Нет", hint:"Кабель без общего экрана."}, 
            {c:"Эм", l:"Эм - Медь-Фольга", hint:"Эм - общий экран из медной ленты."}, 
            {c:"Эмо", l:"Эмо - Медь+Оплетка", hint:"Эмо - общий экран: Медная лента + Оплетка."}, 
            {c:"Экм", l:"Экм - Тройной", hint:"Экм - общий экран: Тройная защита (S-F-S)."}, 
            {c:"Эа", l:"Эа - Алюмофлекс", hint:"Эа - общий экран из алюмолавсановой ленты."}, 
            {c:"Эал", l:"Эал - Алюм+Сетка", hint:"Эал - общий экран: Алюмофлекс + Луженая оплетка."}, 
            {c:"Экл", l:"Экл - Тройной Луж.", hint:"Экл - общий экран: Тройная защита с лужением."}, 
            {c:"Эо", l:"Эо - Сетка Cu", hint:"Эо - общий экран: Медная оплетка."}, 
            {c:"Эл", l:"Эл - Сетка Sn", hint:"Эл - общий экран: Луженая оплетка."},
            {c:"Эн", l:"Эн - Сетка Ni", hint:"Эн - общий экран: Никелированная оплетка."}
        ]},
        { id:7, n:"Водоблокировка", opts:[
            {c:"", l:"Нет", hint:"Сухое исполнение."}, 
            {c:"в", l:"в - Ленты", hint:"в - водоблокирующая лента."}
        ]},
        { id:8, n:"Заполнение", opts:[
            {c:"", l:"Нет", hint:"Без экструдированного заполнения."}, 
            {c:"з", l:"з - Экструзия", hint:"з - экструдированное заполнение (подложка)."}
        ]},
        { id:9, n:"Оболочка", opts:[
            {c:"В", l:"В - ПВХ", hint:"В - ПВХ пластикат."}, 
            {c:"П", l:"П - Полимер HF", hint:"П - полимерная композиция, не содержащая галогенов."}, 
            {c:"Пэ", l:"Пэ - Полиэтилен", hint:"Пэ - светостабилизированный полиэтилен."}, 
            {c:"Пб", l:"Пб - Сшитый Полимер", hint:"Пб – сшитая полимерная композиция HF."}, 
            {c:"У", l:"У - Полиуретан", hint:"У - термопластичный полиуретан."}, 
            {c:"ПУ", l:"ПУ - Полиуретан HF", hint:"ПУ – безгалогенный полиуретан."}, 
            {c:"Р", l:"Р - Силикон", hint:"Р - силиконовая резина."},
            {c:"Тп", l:"Тп - ТЭП", hint:"Тп - термоэластопласт."},
            {c:"Ф", l:"Ф - Фторопласт", hint:"Ф - фторопласт."}
        ]},
        { id:10, n:"Броня", opts:[
            {c:"", l:"Нет", hint:"Кабель без брони."}, 
            {c:"КГ", l:"КГ - Гибкая", hint:"КГ - оплетка из стальных оцинкованных проволок."}, 
            {c:"К", l:"К - Проволока", hint:"К - оплетка из стальных проволок с защитным шлангом."}, 
            {c:"Б", l:"Б - Ленты", hint:"Б - стальные оцинкованные ленты."}, 
            {c:"Кп", l:"Кп - Повив", hint:"Кп - повив из проволок."}, 
            {c:"КБ", l:"КБ - Комби", hint:"КБ - Двойная броня: Оплетка + Ленты."}
        ]},
        { id:11, n:"Пожарная безоп.", opts:[
            {c:"нг(А)", l:"нг(А)", hint:"нг(А) - Не распространяет горение при групповой прокладке."}, 
            {c:"нг(А)-LS", l:"нг(А)-LS", hint:"нг(А)-LS - Пониженное дымо- и газовыделение."}, 
            {c:"нг(А)-HF", l:"нг(А)-HF", hint:"нг(А)-HF - Не выделяющие коррозионных газов."}, 
            {c:"нг(А)-LSLTx", l:"нг(А)-LSLTx", hint:"нг(А)-LSLTx - Низкая токсичность продуктов горения."}, 
            {c:"нг(А)-FRLS", l:"нг(А)-FRLS", hint:"нг(А)-FRLS - Огнестойкий LS."}, 
            {c:"нг(А)-FRHF", l:"нг(А)-FRHF", hint:"нг(А)-FRHF - Огнестойкий HF."}, 
            {c:"нг(А)-FRLSLTx", l:"нг(А)-FRLSLTx", hint:"нг(А)-FRLSLTx - Огнестойкий LTx."}
        ]},
        { id:12, n:"Климат", opts:[
            {c:"", l:"УХЛ", hint:"УХЛ - Умеренно-холодный климат."}, 
            {c:"-ХЛ", l:"-ХЛ", hint:"ХЛ - Холодный климат."}, 
            {c:"-ЭХЛ", l:"-ЭХЛ", hint:"ЭХЛ - Экстремально холодный климат."}, 
            {c:"-Т", l:"-Т", hint:"Т - Тропический климат."},
            {c:"-М", l:"-М", hint:"М - Морской климат."}
        ]},
        { id:13, n:"Маслостойкость", opts:[
            {c:"", l:"Нет", hint:"Стандартная стойкость."}, 
            {c:"-МБ", l:"-МБ", hint:"МБ - Маслобензостойкий."}
        ]},
        { id:14, n:"Химстойкость", opts:[
            {c:"", l:"Нет", hint:"Без специальной защиты."}, 
            {c:"-ХС", l:"-ХС", hint:"ХС - Химически стойкий."}
        ]},
        { id:15, n:"Термостойкость", opts:[
            {c:"", l:"Нет", hint:"Стандартный диапазон."}, 
            {c:"-ТС-125", l:"-ТС 125", hint:"ТС-125 - Термостойкий до +125°С."}, 
            {c:"-ТС-150", l:"-ТС 150", hint:"ТС-150 - Термостойкий до +150°С."},
            {c:"-ТС-200", l:"-ТС 200", hint:"ТС-200 - Термостойкий до +200°С."},
            {c:"-ТС-250", l:"-ТС 250", hint:"ТС-250 - Термостойкий до +250°С."}
        ]},
        { id:16, n:"УФ / Улица", opts:[
            {c:"", l:"Нет", hint:"Для прокладки внутри помещений."}, 
            {c:"-УФ", l:"-УФ", hint:"УФ - для применения на открытом воздухе."}
        ]},
        { id:17, n:"Грызуны", opts:[
            {c:"", l:"Нет", hint:"Без защиты от грызунов."}, 
            {c:"-ГТ", l:"-ГТ", hint:"ГТ - защита от грызунов и термитов."}
        ]},
        { id:18, n:"Геометрия", opts:[
            {c:"NxS", l:"Пучок (NxS)", hint:"Скрутка жил в пучок."}, 
            {c:"Nx2xS", l:"Пары (Nx2xS)", hint:"Скрутка жил в пары."}, 
            {c:"Nx3xS", l:"Тройки (Nx3xS)", hint:"Скрутка жил в тройки."}
        ]},
        { id:19, n:"Гибкость (ГОСТ 22483)", opts:[
            {c:"(1)", l:"(1) - Класс 1", hint:"Класс 1. Жесткая жила."}, 
            {c:"(3)", l:"(3) - Класс 3", hint:"Класс 3. Многопроволочная."}, 
            {c:"(4)", l:"(4) - Класс 4", hint:"Класс 4. Устойчивость к вибрации."}, 
            {c:"(5)", l:"(5) - Класс 5", hint:"Класс 5. Нестационарная прокладка."}, 
            {c:"(6)", l:"(6) - Класс 6", hint:"Класс 6. Робототехника."}
        ]},
        { id:20, n:"Покрытие жилы", opts:[
            {c:"", l:"Медь", hint:"Медная мягкая проволока."}, 
            {c:"л", l:"л - Лужение", hint:"Луженая медь."}, 
            {c:"н", l:"н - Никель", hint:"Никелированная медь."}
        ]},
        { id:21, n:"Искробезоп.", opts:[
            {c:"", l:"Нет", hint:"Общепромышленное применение."}, 
            {c:"i", l:"i - Ex-i", hint:"i - для искробезопасных цепей (Ex-i)."}
        ]},
        { id:22, n:"Напряжение", opts:[
            {c:"-300", l:"-300 В", hint:"300В - для слаботочных систем."}, 
            {c:"-500", l:"-500 В", hint:"500В - для систем автоматики."}, 
            {c:"-660", l:"-660 В", hint:"660В - для цепей контроля."}
        ]},
        { id:23, n:"Протокол", opts:[
            {c:"", l:"Нет", hint:"Кабель общего назначения."}, 
            {c:"[485]", l:"[485]", hint:"Оптимизирован для RS-485."}, 
            {c:"[PB]", l:"[PB]", hint:"Для Profibus."}, 
            {c:"[FF]", l:"[FF]", hint:"Для Foundation Fieldbus."}
        ]},
        { id:24, n:"Цвет оболочки", opts:[
            {c:"Серый", l:"Серый", hint:"Серый (RAL 7035)."}, 
            {c:"Черный", l:"Черный", hint:"Черный (RAL 9005)."}, 
            {c:"Синий", l:"Синий", hint:"Синий (RAL 5015)."}, 
            {c:"Оранжевый", l:"Оранжевый", hint:"Оранжевый (RAL 2003)."}, 
            {c:"Красный", l:"Красный", hint:"Красный (RAL 3000)."}, 
            {c:"Фиолетовый", l:"Фиолетовый", hint:"Фиолетовый (RAL 4001)."}, 
            {c:"Желтый", l:"Желтый", hint:"Желтый (RAL 1021)."}, 
            {c:"Спец", l:"Спеццвет", hint:"Цвет по запросу заказчика."}
        ]}
    ],
    
    // --- [D-05] ГРУППИРОВКА (GROUPS) ---
    GROUPS: [
        { t: "1. ТИП И БЕЗОПАСНОСТЬ", ids: [23, 11, 1, 8, 21] }, 
        { t: "2. СРЕДА ЭКСПЛУАТАЦИИ", ids: [12, 13, 14, 15, 16, 17] }, 
        { t: "3. КОНСТРУКЦИЯ", ids: [19, 4, 6, 10, 7, 5, 3] }, 
        { t: "4. ГЕОМЕТРИЯ ЖИЛ", ids: [18, 20] }, 
        { t: "5. МАТЕРИАЛЫ И ЦВЕТ", ids: [2, 9, 24] }
    ],

    // --- [D-06] РЕЗЕРВ (TWIN_DB) ---
    TWIN_DB: {}
};